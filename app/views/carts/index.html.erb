<%= javascript_include_tag 'cart' %>
<div class="main-textgrids">
  <div class="container">
    <div id="furnitures_table">
      <%= render partial: 'form_furnitures', locals: {furnitures: @furnitures} %>
    </div>
    <div id="appliances_table">
      <%= render partial: 'from_appliances', locals: {appliances: @appliances} %>
    </div>
    <% if @appliances.present? || @furnitures.present? %>
      <div class="text-center total-index-cart">
        <h3 id="total-cart-price">Итого: </h3>
      </div>
      <div class="text-center total-index-cart">
        <div class="donate-top"><input id="submit_order_button" style="margin-left: 0%;" type="submit" value="Оформить заявку"></div>
      </div>
    <% end %>
  </div>
</div>

<!-- Modal -->
<div id="submit_order" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div id="talent-app-modal-content" class="modal-content panel-primary">
      <div class="modal-header panel-heading-cart">
        <h4 class="modal-title">Пожалуйста, введите ваш номер телефона и/или почту</h4>
      </div>

        <form id="submit_order_form" validate="true" remote="true">
          <div class="col-md-12 col-xs-12">
            <div class="form-group">
              <label class="col-md-12">Номер телефона</label>
              <div class="col-md-8 text-center">
                <input class="form-control form-control-line" id="client_phone_number" name="client[phone_number]" placeholder="Ваш номер телефона"/>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-12">Email</label>
              <div class="col-md-8 text-center">
                <input class="form-control form-control-line" id="client_email" name="client[email]" placeholder="Ваш Email"/>
              </div>
            </div>
          </div>
          </br>
          </br>
          <div class="donate-top text-center">
            <input id="submit_order_button_modal" style="margin-left: 0%;width: 40%;margin: 20px 0 10px 0;" type="submit" value="Оформить заявку">
          </div>
        </form>
    </div>
  </div>
</div>

<script>
  $( document ).ready(function() {
    jQuery.extend(jQuery.validator.messages, {
      required: "Это поле обязательно",
      email: "Пожалуйста, введи корректный email адрес."
    });

    var selector = document.getElementById("client_phone_number");
    var im = new Inputmask("(999) 999-9999");
    im.mask(selector);

    $("#submit_order_form").validate({
      errorClass: "text-danger",
      errorElement: "div",
      rules: {
        'client[email]': {
          email: true
        }
      }
    });
  });
</script>